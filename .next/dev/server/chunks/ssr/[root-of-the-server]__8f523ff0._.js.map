{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Aliba/Downloads/New%20folder%20%282%29/WEB422-A3/web422-a2-books-app/lib/authenticate.js"],"sourcesContent":["import jwtDecode from \"jwt-decode\";\r\n\r\nexport function setToken(token) {\r\n  localStorage.setItem(\"token\", token);\r\n}\r\n\r\nexport function getToken() {\r\n  return localStorage.getItem(\"token\");\r\n}\r\n\r\nexport function removeToken() {\r\n  localStorage.removeItem(\"token\");\r\n}\r\n\r\nexport function readToken() {\r\n  try {\r\n    const token = getToken();\r\n    return token ? jwtDecode(token) : null;\r\n  } catch (err) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function isAuthenticated() {\r\n  const token = readToken();\r\n  return token ? true : false;\r\n}\r\n\r\nexport async function authenticateUser(user, password) {\r\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/login`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ userName: user, password })\r\n  });\r\n\r\n  if (res.status === 200) {\r\n    const data = await res.json();\r\n    setToken(data.token);\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function registerUser(user, password, password2) {\r\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/register`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ userName: user, password, password2 })\r\n  });\r\n\r\n  return res.status === 200;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;AAEO,SAAS,SAAS,KAAK;IAC5B,aAAa,OAAO,CAAC,SAAS;AAChC;AAEO,SAAS;IACd,OAAO,aAAa,OAAO,CAAC;AAC9B;AAEO,SAAS;IACd,aAAa,UAAU,CAAC;AAC1B;AAEO,SAAS;IACd,IAAI;QACF,MAAM,QAAQ;QACd,OAAO,QAAQ,IAAA,8HAAS,EAAC,SAAS;IACpC,EAAE,OAAO,KAAK;QACZ,OAAO;IACT;AACF;AAEO,SAAS;IACd,MAAM,QAAQ;IACd,OAAO,QAAQ,OAAO;AACxB;AAEO,eAAe,iBAAiB,IAAI,EAAE,QAAQ;IACnD,MAAM,MAAM,MAAM,MAAM,4FAAmC,MAAM,CAAC,EAAE;QAClE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,UAAU;YAAM;QAAS;IAClD;IAEA,IAAI,IAAI,MAAM,KAAK,KAAK;QACtB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,SAAS,KAAK,KAAK;QACnB,OAAO;IACT,OAAO;QACL,OAAO;IACT;AACF;AAEO,eAAe,aAAa,IAAI,EAAE,QAAQ,EAAE,SAAS;IAC1D,MAAM,MAAM,MAAM,MAAM,4FAAmC,SAAS,CAAC,EAAE;QACrE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,UAAU;YAAM;YAAU;QAAU;IAC7D;IAEA,OAAO,IAAI,MAAM,KAAK;AACxB"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Aliba/Downloads/New%20folder%20%282%29/WEB422-A3/web422-a2-books-app/pages/register.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { registerUser } from \"@/lib/authenticate\";\r\nimport { Button, Form, Alert } from \"react-bootstrap\";\r\n\r\nexport default function Register() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [password2, setPassword2] = useState(\"\");\r\n  const [warning, setWarning] = useState(\"\");\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (password !== password2) {\r\n      setWarning(\"Passwords do not match.\");\r\n      return;\r\n    }\r\n\r\n    const success = await registerUser(user, password, password2);\r\n    if (success) {\r\n      router.push(\"/login\");\r\n    } else {\r\n      setWarning(\"Registration failed.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1>Register</h1>\r\n      {warning && <Alert variant=\"danger\">{warning}</Alert>}\r\n      <Form onSubmit={handleSubmit}>\r\n        <Form.Group>\r\n          <Form.Label>Username</Form.Label>\r\n          <Form.Control type=\"text\" onChange={(e) => setUser(e.target.value)} />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control type=\"password\" onChange={(e) => setPassword(e.target.value)} />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Confirm Password</Form.Label>\r\n          <Form.Control type=\"password\" onChange={(e) => setPassword2(e.target.value)} />\r\n        </Form.Group>\r\n        <Button type=\"submit\">Register</Button>\r\n      </Form>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;;;;;;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,oIAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,+GAAQ,EAAC;IAC3C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IAEvC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAEhB,IAAI,aAAa,WAAW;YAC1B,WAAW;YACX;QACF;QAEA,MAAM,UAAU,MAAM,IAAA,4HAAY,EAAC,MAAM,UAAU;QACnD,IAAI,SAAS;YACX,OAAO,IAAI,CAAC;QACd,OAAO;YACL,WAAW;QACb;IACF;IAEA,qBACE;;0BACE,qKAAC;0BAAG;;;;;;YACH,yBAAW,qKAAC,wLAAK;gBAAC,SAAQ;0BAAU;;;;;;0BACrC,qKAAC,qLAAI;gBAAC,UAAU;;kCACd,qKAAC,qLAAI,CAAC,KAAK;;0CACT,qKAAC,qLAAI,CAAC,KAAK;0CAAC;;;;;;0CACZ,qKAAC,qLAAI,CAAC,OAAO;gCAAC,MAAK;gCAAO,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAEnE,qKAAC,qLAAI,CAAC,KAAK;;0CACT,qKAAC,qLAAI,CAAC,KAAK;0CAAC;;;;;;0CACZ,qKAAC,qLAAI,CAAC,OAAO;gCAAC,MAAK;gCAAW,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAE3E,qKAAC,qLAAI,CAAC,KAAK;;0CACT,qKAAC,qLAAI,CAAC,KAAK;0CAAC;;;;;;0CACZ,qKAAC,qLAAI,CAAC,OAAO;gCAAC,MAAK;gCAAW,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAE5E,qKAAC,2LAAM;wBAAC,MAAK;kCAAS;;;;;;;;;;;;;;AAI9B"}}]
}