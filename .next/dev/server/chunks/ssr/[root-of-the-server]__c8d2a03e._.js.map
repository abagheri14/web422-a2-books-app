{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Aliba/Downloads/New%20folder%20%282%29/WEB422-A3/web422-a2-books-app/store.js"],"sourcesContent":["import { atom } from 'jotai';\r\nexport const favouritesAtom = atom([]);"],"names":[],"mappings":";;;;AAAA;;;;;;AACO,MAAM,iBAAiB,IAAA,kHAAI,EAAC,EAAE"}},
    {"offset": {"line": 56, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Aliba/Downloads/New%20folder%20%282%29/WEB422-A3/web422-a2-books-app/lib/authenticate.js"],"sourcesContent":["import jwtDecode from \"jwt-decode\";\r\n\r\nexport function setToken(token) {\r\n  localStorage.setItem(\"token\", token);\r\n}\r\n\r\nexport function getToken() {\r\n  return localStorage.getItem(\"token\");\r\n}\r\n\r\nexport function removeToken() {\r\n  localStorage.removeItem(\"token\");\r\n}\r\n\r\nexport function readToken() {\r\n  try {\r\n    const token = getToken();\r\n    return token ? jwtDecode(token) : null;\r\n  } catch (err) {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function isAuthenticated() {\r\n  const token = readToken();\r\n  return token ? true : false;\r\n}\r\n\r\nexport async function authenticateUser(user, password) {\r\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/login`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ userName: user, password })\r\n  });\r\n\r\n  if (res.status === 200) {\r\n    const data = await res.json();\r\n    setToken(data.token);\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport async function registerUser(user, password, password2) {\r\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/register`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ userName: user, password, password2 })\r\n  });\r\n\r\n  return res.status === 200;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;;AAEO,SAAS,SAAS,KAAK;IAC5B,aAAa,OAAO,CAAC,SAAS;AAChC;AAEO,SAAS;IACd,OAAO,aAAa,OAAO,CAAC;AAC9B;AAEO,SAAS;IACd,aAAa,UAAU,CAAC;AAC1B;AAEO,SAAS;IACd,IAAI;QACF,MAAM,QAAQ;QACd,OAAO,QAAQ,IAAA,8HAAS,EAAC,SAAS;IACpC,EAAE,OAAO,KAAK;QACZ,OAAO;IACT;AACF;AAEO,SAAS;IACd,MAAM,QAAQ;IACd,OAAO,QAAQ,OAAO;AACxB;AAEO,eAAe,iBAAiB,IAAI,EAAE,QAAQ;IACnD,MAAM,MAAM,MAAM,MAAM,4FAAmC,MAAM,CAAC,EAAE;QAClE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,UAAU;YAAM;QAAS;IAClD;IAEA,IAAI,IAAI,MAAM,KAAK,KAAK;QACtB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,SAAS,KAAK,KAAK;QACnB,OAAO;IACT,OAAO;QACL,OAAO;IACT;AACF;AAEO,eAAe,aAAa,IAAI,EAAE,QAAQ,EAAE,SAAS;IAC1D,MAAM,MAAM,MAAM,MAAM,4FAAmC,SAAS,CAAC,EAAE;QACrE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,UAAU;YAAM;YAAU;QAAU;IAC7D;IAEA,OAAO,IAAI,MAAM,KAAK;AACxB"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Aliba/Downloads/New%20folder%20%282%29/WEB422-A3/web422-a2-books-app/lib/userData.js"],"sourcesContent":["import { getToken } from \"./authenticate\";\r\n\r\nexport async function getFavourites() {\r\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/favourites`, {\r\n    headers: { Authorization: `JWT ${getToken()}` }\r\n  });\r\n\r\n  if (res.status === 200) return res.json();\r\n  return [];\r\n}\r\n\r\nexport async function addToFavourites(id) {\r\n  const res = await fetch(\r\n    `${process.env.NEXT_PUBLIC_API_URL}/favourites/${id}`,\r\n    {\r\n      method: \"PUT\",\r\n      headers: { Authorization: `JWT ${getToken()}` }\r\n    }\r\n  );\r\n\r\n  if (res.status === 200) return res.json();\r\n  return [];\r\n}\r\n\r\nexport async function removeFromFavourites(id) {\r\n  const res = await fetch(\r\n    `${process.env.NEXT_PUBLIC_API_URL}/favourites/${id}`,\r\n    {\r\n      method: \"DELETE\",\r\n      headers: { Authorization: `JWT ${getToken()}` }\r\n    }\r\n  );\r\n\r\n  if (res.status === 200) return res.json();\r\n  return [];\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,eAAe;IACpB,MAAM,MAAM,MAAM,MAAM,4FAAmC,WAAW,CAAC,EAAE;QACvE,SAAS;YAAE,eAAe,CAAC,IAAI,EAAE,IAAA,wHAAQ,KAAI;QAAC;IAChD;IAEA,IAAI,IAAI,MAAM,KAAK,KAAK,OAAO,IAAI,IAAI;IACvC,OAAO,EAAE;AACX;AAEO,eAAe,gBAAgB,EAAE;IACtC,MAAM,MAAM,MAAM,MAChB,4FAAmC,YAAY,EAAE,IAAI,EACrD;QACE,QAAQ;QACR,SAAS;YAAE,eAAe,CAAC,IAAI,EAAE,IAAA,wHAAQ,KAAI;QAAC;IAChD;IAGF,IAAI,IAAI,MAAM,KAAK,KAAK,OAAO,IAAI,IAAI;IACvC,OAAO,EAAE;AACX;AAEO,eAAe,qBAAqB,EAAE;IAC3C,MAAM,MAAM,MAAM,MAChB,4FAAmC,YAAY,EAAE,IAAI,EACrD;QACE,QAAQ;QACR,SAAS;YAAE,eAAe,CAAC,IAAI,EAAE,IAAA,wHAAQ,KAAI;QAAC;IAChD;IAGF,IAAI,IAAI,MAAM,KAAK,KAAK,OAAO,IAAI,IAAI;IACvC,OAAO,EAAE;AACX"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Aliba/Downloads/New%20folder%20%282%29/WEB422-A3/web422-a2-books-app/pages/login.js"],"sourcesContent":["import { useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useAtom } from \"jotai\";\r\nimport { favouritesAtom } from \"@/store\";\r\nimport { authenticateUser } from \"@/lib/authenticate\";\r\nimport { getFavourites } from \"@/lib/userData\";\r\nimport { Button, Form, Alert } from \"react-bootstrap\";\r\n\r\nexport default function Login() {\r\n  const router = useRouter();\r\n  const [user, setUser] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [warning, setWarning] = useState(\"\");\r\n  const [favouritesList, setFavouritesList] = useAtom(favouritesAtom);\r\n\r\n  async function updateAtom() {\r\n    setFavouritesList(await getFavourites());\r\n  }\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const success = await authenticateUser(user, password);\r\n    if (success) {\r\n      await updateAtom();\r\n      router.push(\"/\");\r\n    } else {\r\n      setWarning(\"Invalid login.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1>Login</h1>\r\n      {warning && <Alert variant=\"danger\">{warning}</Alert>}\r\n      <Form onSubmit={handleSubmit}>\r\n        <Form.Group>\r\n          <Form.Label>Username</Form.Label>\r\n          <Form.Control type=\"text\" onChange={(e) => setUser(e.target.value)} />\r\n        </Form.Group>\r\n        <Form.Group>\r\n          <Form.Label>Password</Form.Label>\r\n          <Form.Control\r\n            type=\"password\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </Form.Group>\r\n        <Button type=\"submit\">Login</Button>\r\n      </Form>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,oIAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,+GAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,qHAAO,EAAC,gHAAc;IAElE,eAAe;QACb,kBAAkB,MAAM,IAAA,yHAAa;IACvC;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,MAAM,UAAU,MAAM,IAAA,gIAAgB,EAAC,MAAM;QAC7C,IAAI,SAAS;YACX,MAAM;YACN,OAAO,IAAI,CAAC;QACd,OAAO;YACL,WAAW;QACb;IACF;IAEA,qBACE;;0BACE,qKAAC;0BAAG;;;;;;YACH,yBAAW,qKAAC,wLAAK;gBAAC,SAAQ;0BAAU;;;;;;0BACrC,qKAAC,qLAAI;gBAAC,UAAU;;kCACd,qKAAC,qLAAI,CAAC,KAAK;;0CACT,qKAAC,qLAAI,CAAC,KAAK;0CAAC;;;;;;0CACZ,qKAAC,qLAAI,CAAC,OAAO;gCAAC,MAAK;gCAAO,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAEnE,qKAAC,qLAAI,CAAC,KAAK;;0CACT,qKAAC,qLAAI,CAAC,KAAK;0CAAC;;;;;;0CACZ,qKAAC,qLAAI,CAAC,OAAO;gCACX,MAAK;gCACL,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kCAG/C,qKAAC,2LAAM;wBAAC,MAAK;kCAAS;;;;;;;;;;;;;;AAI9B"}}]
}